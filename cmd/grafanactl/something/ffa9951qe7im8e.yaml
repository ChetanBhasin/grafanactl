annotations:
  description: The MM account (BpBqYNxP4nhwh5tzT4kDcjRt9nGgeba4BRFJVVTbQmBE) has available maintenance margin of {{ printf "%.2f" $values.B.Value }}, which is below the $10k threshold.
  summary: Market Maker available maintenance margin is below $10k
condition: C
data:
  - datasourceUid: ef7drfxk2ll34d
    model:
      editorMode: code
      format: 1.0
      intervalMs: 1000.0
      maxDataPoints: 43200.0
      meta:
        builderOptions:
          mode: list
      queryType: sql
      rawSql: |
        SELECT
            toStartOfMinute(indexed_time) AS time,
            any(available_maintenance_margin) as available_maintenance_margin
        FROM bullet_mainnet.user_account_snapshot
        WHERE $__timeFilter(indexed_time)
            AND address == 'BpBqYNxP4nhwh5tzT4kDcjRt9nGgeba4BRFJVVTbQmBE'
        GROUP BY time
        ORDER BY time ASC
        LIMIT 10000
      refId: A
    queryType: sql
    refId: A
    relativeTimeRange:
      from: 600
  - datasourceUid: __expr__
    model:
      datasource:
        type: __expr__
        uid: __expr__
      expression: A
      intervalMs: 1000.0
      maxDataPoints: 43200.0
      reducer: last
      refId: B
      settings:
        mode: dropNN
      type: reduce
    refId: B
    relativeTimeRange: {}
  - datasourceUid: __expr__
    model:
      datasource:
        type: __expr__
        uid: __expr__
      expression: $B < 10000
      intervalMs: 1000.0
      maxDataPoints: 43200.0
      refId: C
      type: math
    refId: C
    relativeTimeRange: {}
execErrState: OK
folderUID: mainnet-low-priority-alerts
for: 5m0s
id: 83
labels:
  alert_type: market_maker
  environment: mainnet
  priority: low
  severity: warning
  team: platform
noDataState: OK
orgID: 1
provenance: api
ruleGroup: Market Maker Alerts
title: MM Available Maintenance Margin < $10k
uid: ffa9951qe7im8e
updated: "2026-02-13T12:51:05.000Z"
